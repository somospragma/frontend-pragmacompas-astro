---
import SectionHeader from "@/components/atoms/SectionHeader";
import UsersList from "@/components/organisms/UsersList/UsersList.tsx";
import UsersStats from "@/components/organisms/UsersStats/UsersStats.tsx";
import DashboardLayout from "@/components/templates/DashboardLayout.astro";
import { UserRole } from "@/shared/utils/enums/role";
import { getSession } from "auth-astro/server";
import type { SessionUser } from "auth.config";

const session = (await getSession(Astro.request)) as SessionUser;
---

<DashboardLayout>
  <div class="space-y-10">
    <SectionHeader description="Administra y supervisa a los administradores" />

    <div>
      <UsersStats
        chapterId={session?.user?.chapterId || ""}
        userType={UserRole.ADMINISTRADOR}
        label="Administradores Activos"
        iconColor="yellow"
        client:load
      />
    </div>

    <div>
      <UsersList
        chapterId={session?.user?.chapterId || ""}
        userType={UserRole.ADMINISTRADOR}
        title="Lista de Administradores"
        client:load
      />
    </div>
  </div>
</DashboardLayout>
